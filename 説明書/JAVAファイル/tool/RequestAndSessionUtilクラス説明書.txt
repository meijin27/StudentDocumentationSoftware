クラス説明書: RequestAndSessionUtil

1. 概要
RequestAndSessionUtil クラスは、Webアプリケーションでのリクエストとセッションのユーティリティ関数を提供するクラスです。このクラスには、リクエストパラメータの保存、セッションの確認、エラー属性の確認などのメソッドが含まれています。

2. コード詳細
2.1. storeParametersInSession メソッド
このメソッドは、指定されたリクエストオブジェクトの全てのパラメータをセッションに格納します。

2.2. storeParametersInRequest メソッド
このメソッドは、指定されたリクエストオブジェクトの全てのパラメータを再度リクエストに格納します。

2.3. validateSession メソッド
このメソッドは、トークンや指定されたセッション属性の確認を行います。トークンや属性の確認で問題が発生した場合、エラーメッセージをセッションに設定し、ログインページにリダイレクトします。

2.4. hasErrorAttributes メソッド
このメソッドは、指定されたリクエストオブジェクトの属性名の末尾に[Error]が含まれているかどうかを確認します。

3. 使用方法
・リクエストの全てのパラメータをセッションに保存する場合は、storeParametersInSession メソッドを使用します。
・リクエストの全てのパラメータを再度リクエストに保存する場合は、storeParametersInRequest メソッドを使用します。
・セッションのトークンや指定された属性の確認を行いたい場合は、validateSession メソッドを使用します。
・リクエストの属性名にエラーが含まれているかどうかを確認する場合は、hasErrorAttributes メソッドを使用します。

4. 注意事項
validateSession メソッドでは、CSRFトークンの確認も行われているため、このメソッドを使用する際には、正しいトークンがセットされていることを確認してください。
セッションやリクエストに保存するパラメータの名前が重複している場合、最後に格納された値が上書きされることに注意してください。